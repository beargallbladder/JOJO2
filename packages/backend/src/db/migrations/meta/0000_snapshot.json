{
  "id": "aaa48e83-96ae-4a1e-bdb7-db1d1af0bdd1",
  "prevId": "00000000-0000-0000-0000-000000000000",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.booking_drafts": {
      "name": "booking_drafts",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "vin_id": {
          "name": "vin_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "dealer_id": {
          "name": "dealer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "slot_id": {
          "name": "slot_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "booking_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'draft'"
        },
        "reason": {
          "name": "reason",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "contact": {
          "name": "contact",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "booking_drafts_vin_id_vins_id_fk": {
          "name": "booking_drafts_vin_id_vins_id_fk",
          "tableFrom": "booking_drafts",
          "tableTo": "vins",
          "columnsFrom": [
            "vin_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "booking_drafts_dealer_id_dealer_directory_id_fk": {
          "name": "booking_drafts_dealer_id_dealer_directory_id_fk",
          "tableFrom": "booking_drafts",
          "tableTo": "dealer_directory",
          "columnsFrom": [
            "dealer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "booking_drafts_slot_id_fsr_slots_id_fk": {
          "name": "booking_drafts_slot_id_fsr_slots_id_fk",
          "tableFrom": "booking_drafts",
          "tableTo": "fsr_slots",
          "columnsFrom": [
            "slot_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    },
    "public.dealer_directory": {
      "name": "dealer_directory",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "code": {
          "name": "code",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "metro_area": {
          "name": "metro_area",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "postal_prefix": {
          "name": "postal_prefix",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "address": {
          "name": "address",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "phone": {
          "name": "phone",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "capabilities": {
          "name": "capabilities",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'[]'::jsonb"
        },
        "latitude": {
          "name": "latitude",
          "type": "real",
          "primaryKey": false,
          "notNull": true
        },
        "longitude": {
          "name": "longitude",
          "type": "real",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "dealer_directory_code_unique": {
          "name": "dealer_directory_code_unique",
          "nullsNotDistinct": false,
          "columns": [
            "code"
          ]
        }
      }
    },
    "public.fsr_slots": {
      "name": "fsr_slots",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "dealer_id": {
          "name": "dealer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "date": {
          "name": "date",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "time_block": {
          "name": "time_block",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "capacity": {
          "name": "capacity",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 2
        },
        "booked": {
          "name": "booked",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        }
      },
      "indexes": {},
      "foreignKeys": {
        "fsr_slots_dealer_id_dealer_directory_id_fk": {
          "name": "fsr_slots_dealer_id_dealer_directory_id_fk",
          "tableFrom": "fsr_slots",
          "tableTo": "dealer_directory",
          "columnsFrom": [
            "dealer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    },
    "public.governance_actions": {
      "name": "governance_actions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "vin_id": {
          "name": "vin_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "action_type": {
          "name": "action_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "reason": {
          "name": "reason",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "triggered_by": {
          "name": "triggered_by",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "governance_actions_vin_id_vins_id_fk": {
          "name": "governance_actions_vin_id_vins_id_fk",
          "tableFrom": "governance_actions",
          "tableTo": "vins",
          "columnsFrom": [
            "vin_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    },
    "public.memory_records": {
      "name": "memory_records",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "vin_id": {
          "name": "vin_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "record_type": {
          "name": "record_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "source": {
          "name": "source",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "memory_records_vin_id_vins_id_fk": {
          "name": "memory_records_vin_id_vins_id_fk",
          "tableFrom": "memory_records",
          "tableTo": "vins",
          "columnsFrom": [
            "vin_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    },
    "public.pillar_events": {
      "name": "pillar_events",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "vin_id": {
          "name": "vin_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "pillar_name": {
          "name": "pillar_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "pillar_state": {
          "name": "pillar_state",
          "type": "pillar_state",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "confidence": {
          "name": "confidence",
          "type": "real",
          "primaryKey": false,
          "notNull": true,
          "default": 0.5
        },
        "evidence_source": {
          "name": "evidence_source",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "occurred_at": {
          "name": "occurred_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "pillar_events_vin_id_vins_id_fk": {
          "name": "pillar_events_vin_id_vins_id_fk",
          "tableFrom": "pillar_events",
          "tableTo": "vins",
          "columnsFrom": [
            "vin_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    },
    "public.posterior_snapshots": {
      "name": "posterior_snapshots",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "vin_id": {
          "name": "vin_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "p_score": {
          "name": "p_score",
          "type": "real",
          "primaryKey": false,
          "notNull": true
        },
        "c_score": {
          "name": "c_score",
          "type": "real",
          "primaryKey": false,
          "notNull": true
        },
        "s_score": {
          "name": "s_score",
          "type": "real",
          "primaryKey": false,
          "notNull": true
        },
        "risk_band": {
          "name": "risk_band",
          "type": "risk_band",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "pillar_vector": {
          "name": "pillar_vector",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "frame_index": {
          "name": "frame_index",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "computed_at": {
          "name": "computed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "posterior_snapshots_vin_id_vins_id_fk": {
          "name": "posterior_snapshots_vin_id_vins_id_fk",
          "tableFrom": "posterior_snapshots",
          "tableTo": "vins",
          "columnsFrom": [
            "vin_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    },
    "public.vin_preferences": {
      "name": "vin_preferences",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "vin_id": {
          "name": "vin_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "home_area": {
          "name": "home_area",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "preferred_dealer_id": {
          "name": "preferred_dealer_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "use_preferred_first": {
          "name": "use_preferred_first",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "vin_preferences_vin_id_vins_id_fk": {
          "name": "vin_preferences_vin_id_vins_id_fk",
          "tableFrom": "vin_preferences",
          "tableTo": "vins",
          "columnsFrom": [
            "vin_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "vin_preferences_preferred_dealer_id_dealer_directory_id_fk": {
          "name": "vin_preferences_preferred_dealer_id_dealer_directory_id_fk",
          "tableFrom": "vin_preferences",
          "tableTo": "dealer_directory",
          "columnsFrom": [
            "preferred_dealer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "vin_preferences_vin_id_unique": {
          "name": "vin_preferences_vin_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "vin_id"
          ]
        }
      }
    },
    "public.vins": {
      "name": "vins",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "vin_code": {
          "name": "vin_code",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "year": {
          "name": "year",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "make": {
          "name": "make",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "model": {
          "name": "model",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "trim": {
          "name": "trim",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "subsystem": {
          "name": "subsystem",
          "type": "subsystem",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "posterior_p": {
          "name": "posterior_p",
          "type": "real",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "posterior_c": {
          "name": "posterior_c",
          "type": "real",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "posterior_s": {
          "name": "posterior_s",
          "type": "real",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "risk_band": {
          "name": "risk_band",
          "type": "risk_band",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'low'"
        },
        "home_area": {
          "name": "home_area",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "last_event_at": {
          "name": "last_event_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "vins_vin_code_unique": {
          "name": "vins_vin_code_unique",
          "nullsNotDistinct": false,
          "columns": [
            "vin_code"
          ]
        }
      }
    }
  },
  "enums": {
    "public.booking_status": {
      "name": "booking_status",
      "schema": "public",
      "values": [
        "draft",
        "held",
        "exported"
      ]
    },
    "public.pillar_state": {
      "name": "pillar_state",
      "schema": "public",
      "values": [
        "present",
        "absent",
        "unknown"
      ]
    },
    "public.risk_band": {
      "name": "risk_band",
      "schema": "public",
      "values": [
        "critical",
        "high",
        "medium",
        "low"
      ]
    },
    "public.subsystem": {
      "name": "subsystem",
      "schema": "public",
      "values": [
        "propulsion",
        "chassis",
        "safety"
      ]
    }
  },
  "schemas": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}